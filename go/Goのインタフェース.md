---
tags:
  - 初めてのGo言語
---

## インタフェースとは

[[インタフェース]]は、Go で唯一の[[抽象型]] (実装を提供しない型) で、次の2つの側面を持つ。

1. メソッドの集合――多言語のインタフェースのように、特定のクラスが満たすべき要件（実装するべき一群のメソッド）を示す
2. 型――変数がインタフェースを基盤とする型を持つことで、様々なこと（e.g. 任意の型の値を代入できる変数を定義[^2024-12-24-084804]）ができる

[^2024-12-24-084804]: 特によく使われるのが [[interface{}]]。これは「0個のメソッドが定義された型」という意味になり、任意の型がこの条件を満たすため任意の型の値を記憶できる。[[Go 1.18]] からは `interface{}` の代わりに [[any]] と書けるようになった。

### インタフェースを宣言する方法

キーワード `type` + インタフェース名 + インタフェースリテラル (`interface` + メソッドリスト[^2024-12-24-090105])

[^2024-12-24-090105]: インタフェースを満たすために実装するメソッドのリスト。メソッドセットとも言う

```go
type Stringer interface {
	String() string
}
```

### インタフェースの特徴

- [[インタフェース型]]は型の集合を定義する。`int` や `string`、「`struct` を使って定義した型」と同様、**インタフェースも型の一種**
- インタフェース型の変数は、そのインタフェースが特定する型の集合に属する任意の型の値を記憶できる
- 任意のブロックでインタフェースを定義できる (他の型と同様)
- インタフェースの名前は、"er" で終わるのが通例[^2024-12-24-090230]

[^2024-12-24-090230]: [[fmt.Stringer]], [[io.Reader]], [[io.Closer]], [[io.ReadCloser]], [[json.Marshaler]], [[http.Handler]] など、標準ライブラリには多くのインタフェースが使われている。


### Goのインタフェースは「暗黙的」

[インタフェースの特徴](#インタフェースの特徴)は他言語のそれと大きく異なるものはないが、Goのインタフェースはそれが「暗黙的に」実装される点が特別。[[具象型]] (具体的な実装) のほうではあるインタフェースを実装することを明示的に宣言することはなく、ある具象型 `C` のメソッドセットがあるインタフェース `I` のメソッドセットを完全に含めば、具象型 `C` はインタフェース `I` を「暗黙的（自動的）に」実装したことになる。

この仕様により、Goでは「型の安全性」(type-safe) と「デカップリング[^2024-12-24-091501]」(decoupling、分離) の両方が達成され、静的言語と動的言語の両方の機能を併せ持つことができている。

[^2024-12-24-091501]: インタフェースと具象型の「分離」が達成され、コードの[[変更容易性]]が高められるということらしい。

